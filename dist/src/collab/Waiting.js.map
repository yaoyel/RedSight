{"version":3,"file":"Waiting.js","sourceRoot":"","sources":["../../../src/collab/Waiting.ts"],"names":[],"mappings":";;AAAA;IAEI,YAAoB,IAAS,EAAU,IAAS,EAAU,EAAU,EAAU,MAAW;QAArE,SAAI,GAAJ,IAAI,CAAK;QAAU,SAAI,GAAJ,IAAI,CAAK;QAAU,OAAE,GAAF,EAAE,CAAQ;QAAU,WAAM,GAAN,MAAM,CAAK;QACrF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAA;QAChB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAA;QAChB,IAAI,CAAC,EAAE,GAAG,EAAE,CAAA;QACZ,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;QACpB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAA;QACjB,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,EAAE,GAAG,CAAC,EAAE;YAC3B,IAAI,CAAC,KAAK,EAAE,CAAA;YACZ,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAClB,CAAC,CAAC,CAAC;IACP,CAAC;IACD,KAAK;QACD,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAC5C,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;YAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;IACvD,CAAC;IAED,IAAI,CAAC,MAAW;QACZ,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;YAAC,MAAM,CAAC;QACtB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACrB,CAAC;CACJ;AAvBD,0BAuBC","sourcesContent":["export class Waiting {\n    done: boolean;\n    constructor(private resp: any, private inst: any, private ip: string, private finish: any) {\n        this.resp = resp\n        this.inst = inst\n        this.ip = ip\n        this.finish = finish\n        this.done = false\n        resp.setTimeout(1000 * 60 * 5, () => {\n            this.abort()\n            this.send({});\n        });\n    }\n    abort() {\n        let found = this.inst.waiting.indexOf(this);\n        if (found > -1) this.inst.waiting.splice(found, 1);\n    }\n\n    send(output: any) {\n        if (this.done) return;\n        output.resp(this.resp);\n        this.done = true;\n    }\n}"]}